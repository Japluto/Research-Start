## 目前的目标是一周内拿下ros2的基本使用
---
#### 一、一些前置步骤：
---
**1. 激活环境（设置的别名）：ros2_on**
* 一些基本的检查 —— 
* （1）printenv | grep ROS
* （2）ros2 doctor
**2. turtlesim 验证ros2是否正常工作**

---
#### 二、linux命令行操作
---
**1. 文件与目录操作 (基础核心)**

* **`pwd`** (Print Working Directory)
* **作用：** 显示你当前所在的完整路径。
</br>

* **`ls`** (List)
* **作用：** 列出当前目录下的文件。
* **常用参数：**
* `ls`：仅列出非隐藏文件。
* **`ls -A`** (或 `ls -a`)：列出所有文件，包括以 `.` 开头的隐藏文件。
</br>

* **`cd`** (Change Directory)
* **作用：** 切换目录。
* **常用技巧：**
* `cd test/`：进入 test 文件夹。
* **`cd ..`**：返回上一级目录（非常有用的操作）。
* `cd ~` 或直接 `cd`：快速回到用户的家目录 (`/home/用户名`)。
</br>

* **`mkdir`** (Make Directory)
* **作用：** 创建一个新的文件夹。
* *例子：* `mkdir test` 创建了一个名为 test 的目录。
</br>

* **`touch`**
* **作用：** 创建一个空的普通文件（如果文件已存在，则更新其时间戳）。
* *例子：* `touch read.txt`。
</br>


**2. 删除操作 (重点注意)**
* **`rm`** (Remove)
* **作用：** 删除文件或目录。
* **关键区别（你在截图中遇到的坑）：**
* `rm read.txt`：直接删除普通文件。
</br>

* **`rm -R`** (或 `-r`, Recursive)：**递归删除**。如果你想删除一个**文件夹**（如 `test/`），必须加这个参数，否则会报错 "Is a directory"（如截图 1 第一行所示）。

**3. 软件管理与权限 (进阶)**
* **`sudo`** (SuperUser Do)
* **作用：** 以管理员（root）权限执行命令。安装软件或修改系统配置时必须使用。
</br>

* **`apt install`**
* **作用：** Ubuntu 的软件包管理器，用于安装软件。
</br>

* **Tab 键补全 (高效技巧)**



---

#### 三、ros2命令行操作

---
**1. 节点 (Node) 相关操作**

* **查看节点列表：** `ros2 node list`
* **查看节点具体信息：** `ros2 node info <node_name>`
* *注：* 可以看到节点发布/订阅的话题、服务和动作。


* **运行一个节点：** `ros2 run <package_name> <executable_name>`
* *例子：* `ros2 run turtlesim turtlesim_node`



**2. 话题 (Topic) 相关操作**

* **查看话题列表：** `ros2 topic list`
* 加上 `-t` 参数可显示消息类型：`ros2 topic list -t`


* **监听话题内容 (Echo)：** `ros2 topic echo <topic_name>`
* *作用：* 实时打印该话题的数据，用于调试。


* **查看话题详情：** `ros2 topic info <topic_name>`
* *作用：* 查看发布者和订阅者的数量。


* **手动发布消息：** `ros2 topic pub <topic_name> <msg_type> "<args>"`
* *例子（让海龟动起来）：*
`ros2 topic pub --once /turtle1/cmd_vel geometry_msgs/msg/Twist "{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}"`



**3. 服务 (Service) 相关操作**

* **查看服务列表：** `ros2 service list`
* **查看服务类型：** `ros2 service type <service_name>`
* **手动调用服务：** `ros2 service call <service_name> <service_type> "<args>"`
* *例子（生成新海龟）：* `ros2 service call /spawn turtlesim/srv/Spawn "{x: 2, y: 2, theta: 0.2, name: ''}"`



**4. 常用可视化与调试工具**

* **rqt_graph：**
* 在终端输入 `rqt_graph`，会弹出一个窗口，直观展示当前所有节点和话题的连接关系图（非常重要）。


* **ros2 bag (录包工具)：**
* `ros2 bag record -a`：记录所有话题数据。
* `ros2 bag play <bag_file>`：回放数据。

---
#### 四、通信接口

##### 1. 通信接口是什么？（通俗理解）

在ROS2中，节点（Node）之间需要交流数据（比如摄像头节点要把图像传给视觉处理节点）。**通信接口**就好比是**大家约定好的“通用语言”或者“数据格式”**。

* **生活类比**：
* 这就好比生活中的**插头和插座**。只有三孔插头对三孔插座，或者Type-C线对Type-C接口，两者才能“通电”或“传输数据”。
* 如果A说的是方言，B说的是外语，他们没法交流。通信接口就是规定：我们都用“标准普通话”，并且第一句先说“你好”，第二句说“吃饭没”。



**核心目的**：让不同的程序（节点）能够相互识别、建立连接，并准确地解析对方发来的数据。

##### 2. 为什么要专门定义接口？

* **跨语言协作**：ROS2支持C++、Python等多种语言。通过定义一种标准的接口文件（比如`.msg`或`.srv`），ROS编译器会自动把它转换成C++能看懂的头文件和Python能看懂的模块。
* *你只管定义一次，ROS帮你翻译成各国语言。*


* **解耦合**：用相机驱动时，你不需要知道驱动是用什么代码写的，只要知道它发出的“图像接口”长什么样，你就能直接接过来用。

##### 3. 三种核心接口类型

ROS2根据通信方式的不同，主要有三种接口文件的定义方式：

###### (1) 话题接口（Topic） -> `.msg` 文件

* **特点**：单向传输，像广播一样。
* **结构**：只需要描述发出去的数据是什么。
* **例子**：描述一个二维坐标。
```text
int32 x
int32 y

```


*(意为：我发给你一个整数x和一个整数y)*

###### (2) 服务接口（Service） -> `.srv` 文件

* **特点**：一问一答，像函数调用。
* **结构**：用 `---` 分割线把内容分为两部分：**请求数据** 和 **应答数据**。
* **例子**：做个加法计算。
```text
int64 a    # 请求：给我两个数a
int64 b    # 和b
---
int64 sum  # 应答：我返给你它们的和

```



###### (3) 动作接口（Action） -> `.action` 文件

* **特点**：处理耗时任务（如导航到某地），有目标、有结果、过程中还有反馈。
* **结构**：用两个 `---` 分割成三部分：**目标**、**结果**、**过程反馈**。
* **例子**：让机器人转圈。
```text
bool start_spin    # 1. 目标：开始转吗？
---
bool finished      # 2. 结果：转完没？
---
int32 current_deg  # 3. 反馈：现在转到多少度了？

```



##### 4. 标准接口 vs 自定义接口

* **标准接口**：ROS2自带了很多常用的定义，比如基础的 `int32`, `bool`, `string`，还有复杂的像 `sensor_msgs/Image` (图像数据) 或 `geometry_msgs/Twist` (速度指令)。通常能用标准的就用标准的。
* **自定义接口**：如果标准的满足不了需求，你可以自己写 `.msg` 或 `.srv` 文件（如网页案例中的 `GetObjectPosition.srv`）。

##### 5. 如何使用自定义接口？（四步走）

如果你定义了一个新的接口，需要经过以下步骤才能在代码里用：

1. **定义文件**：在功能包的 `msg/` 或 `srv/` 目录下创建文件（如 `ObjectPosition.msg`）。
2. **配置编译**：
* 在 `package.xml` 中添加依赖（`rosidl_default_generators` 等）。
* 在 `CMakeLists.txt` 中告诉编译器这个文件的位置 (`rosidl_generate_interfaces`)。


3. **编译生成**：运行 `colcon build`，系统会自动生成对应的语言代码。
4. **代码调用**：
* **Python**: `from 包名.msg import ObjectPosition`
* **C++**: `#include "包名/msg/object_position.hpp"`



##### 6. 常用命令行工具

* `ros2 interface list`：列出系统里所有可用的接口。
* `ros2 interface show <接口名>`：查看某个接口具体定义了哪些字段（比如看看图像消息里到底有哪些参数）。
* `ros2 interface package <包名>`：查看某个功能包里定义了哪些接口。

---

**总结**：通信接口就是ROS2世界的**协议书**。无论是标准协议还是你自定义的协议，只要双方（节点）都拿着这份协议，就能顺畅地传递信息，指挥机器人工作。